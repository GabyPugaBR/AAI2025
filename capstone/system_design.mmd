---
config:
  layout: fixed
---
flowchart TB
 subgraph Channels["User Channels"]
        U["User<br>Slack / Teams / Web / Email"]
  end
 subgraph Agents["Agent Nodes"]
        IA["Intake Agent<br>(Intent Classification)"]
        KA["Knowledge Agent<br>(RAG over PDFs + Chroma)"]
        WA["Workflow Agent<br>(MCP Automations)"]
        EA["Escalation Agent<br>(Human Handoff)"]
  end
 subgraph LangGraph["LangGraph Orchestration Layer"]
        ORCH["LangGraph Runtime<br>(Graph State, Routing, Decision Nodes)"]
        Agents
        CTX["(GraphState Store<br>Intent, Entities, RAG Docs,<br>Actions, Tool Results)"]
  end
 subgraph RAG["RAG Layer"]
        PDFS["Uploaded PDF Documents<br>Runbooks, Policies, How-Tos"]
        SPLIT["Text Splitter<br>Chunking"]
        EMB["OpenAI Embeddings"]
        CHR["Chroma Vector DB"]
  end
 subgraph MCP["Model Context Protocol Tool Layer"]
        MCPClient["MCP Client<br>(Pinecone Tools / Other Tools)"]
        IDP["IDP Tools<br>reset_password(), unlock_account()"]
        LOGS["Logging Tools<br>get_recent_logs()"]
        ITSM["ITSM Tools<br>create_ticket(), create_incident()"]
  end
    U --> GW["API Gateway<br>Auth, Rate Limits, Channel Normalization"]
    GW --> ORCH
    ORCH <--> CTX
    KA --> EMB
    EMB --> CHR
    CHR --> KA
    PDFS --> SPLIT
    SPLIT --> EMB
    WA --> MCPClient
    EA --> MCPClient
    MCPClient --> IDP & LOGS & ITSM
    ITSM --> HUM["Human IT Support Team"]
